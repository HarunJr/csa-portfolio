import type { NextPage } from 'next'
import { useStoreActions, useStoreState } from "../utils/store"
import { useState, useEffect } from 'react'
import { Lucid, Credential, TxHash, Lovelace, Constr, SpendingValidator, Data, fromText, Unit, MintingPolicy, PolicyId, Address, UTxO, applyParamsToScript, Assets, ScriptHash, Redeemer, paymentCredentialOf, KeyHash, generatePrivateKey, getAddressDetails, toUnit } from 'lucid-cardano'
import initLucid from '../utils/lucid'

import Link from 'next/link'
import { useRouter } from 'next/router';
import Layout from '../components/Layout'

const MintCip68 : NextPage = () => {
    const walletStore = useStoreState((state: any) => state.wallet)
    const [nftList, setNftList] = useState([])
    const [lucid, setLucid] = useState<Lucid>()
    const [script, setScript] = useState<SpendingValidator>()
    const [scriptAddress, setScriptAddress] = useState("")
    const [ariadyTxHash, setAriadyTxHash] = useState("")
    const [efrainTxHash, setEfrainTxHash] = useState("")
    const [tokenNameInput, setTokenNameInput] = useState("")
  
  
    useEffect(() => {
      if (lucid) {
        ;
      } else {
        initLucid(walletStore.name).then((Lucid: Lucid) => { setLucid(Lucid) })
      }
    }, [lucid]);

    const Metadata333 = Data.Map(Data.Bytes(), Data.Any());
    type Metadata333 = Data.Static<typeof Metadata333>;
    
    const Metadata222 = Data.Map(Data.Bytes(), Data.Any());
    type Metadata222 = Data.Static<typeof Metadata222>;
  
    const DatumMetadata = Data.Object({
      metadata: Metadata222,
      version: Data.Integer({ minimum: 1, maximum: 1 }),
      extra: Data.Any(),
    });
    type DatumMetadata = Data.Static<typeof DatumMetadata>;
  
    type Metadata = {
      name: string;
      description: string;
      ticker?: string;
      url?: string;
      logo?: string;
      decimals?: number;
    };
  

    type NFTMetadata = {
        name: string;
        image: string;
        mediaType?: string;
        description?: string;
        files?: FileDetails[];
      };

      type FileDetails = {
        name?: string;
        mediaType: string;
        src: string;
      };
    
  

    const mintOnchainMetadata = async () => {
        console.log(tokenNameInput);

        if (lucid) {
          const utxos = await lucid.wallet.getUtxos();
          const txOutId = utxos[0].txHash
          const txId = new Constr(0, [txOutId])
          const txOutRefParam = new Constr(0, [txId, BigInt(utxos[0].outputIndex)])
          const emurgoMintingCbor = "5902835902800100003232323232323232323232323232323222232332232323232323253330163370e9000001099199919911980091911180100198018008912800919991180b11299980c800880189980218108009801181000091180091299980e99b8848000dd6981180209911980080100199b80002375a604600826446600200800466e00004dd6981180219191198008018012400090000009999111980b11299980c80089128008a99980e99baf301f30210010041300530210011300230200010012322230020033756603e0026ea4008004dd5980d980d180d0029180091299980d299980d19b8700c4800054cc064cdc3801240082a6603266e1c0052000153301933014232323232533301f3370e90000010b0a9980f19b8f375c604600291011c791d504ef072be11979a3c722bf1a46a8af77be7326fb7949da497c100133712904051e1a3999911199980c801240004666603400490003ad37560020066eacc08cc088010060060c090008c07c004dd51918109811000981000098100009bac301e008133014233223375e6e9cc088008dd39811000980f98100008089bac301e0091533301a3370e01890010a9980c99b87002480004cdc4000a40002a6603266e1c009200013371000290000a4c2c2c6eb8c06800458c06c008c058004dd5180b980b001980a980a800980b180a800980a8009bad003002375a004460046ea40048888cc01c894ccc028004401454ccc038cdd79808180900080309802180a1809000898011808800800a45002300222533300500114a02a6600c6006601a002260046018002464600446600400400246004466004004002aae7c8cc010004008528911998018010008022b9a14a0aae755d12ba1230023754002aae781"
          const emurgoMetadataControlCbor = "525101000022225333573466ebc01001058581"
          const emurgoTreasuryCbor = "5921d95921d60100002222323232323232323233332222323232325333573466e1d20020021323232323232325333573466e1d200000215335738921435061747465726e206d61746368206661696c75726520696e2027646f2720626c6f636b206174207372632f44414f56616c696461746f722e68733a3130343a352d353400161323232323253335734a6644666ae6800800452819b873332223333232222332323002233002002001230022330020020012253335573e002200a2a666ae68cdd79aab9d3574200200c260086aae78d5d0800898011aba2001001375200200490001199991911119919180111980100100091801119801001000912999aab9f001100515333573466ebcd55ce9aba10010061300435573c6ae840044c008d5d10008009ba900100248001d69bab00100337566ae84d5d100480a000a40042a6644666ae6800800452819b873332223333232222332323002233002002001230022330020020012253335573e002200a2a666ae68cdd79aab9d3574200200c260086aae78d5d0800898011aba2001001375200200490001199991911119919180111980100100091801119801001000912999aab9f001100515333573466ebcd55ce9aba10010061300435573c6ae840044c008d5d10008009ba900100248001d69bab00100337566ae84014050005200213232325333573466e1d20000021323233223335734004002940cdc49bad357426ae8803cc94ccd55cf8008a400026646646444a666aae7c00440084cc00ccdc0001240046ae880048cc0080080048c8894ccd55cf800880109980199b8000248008d5d100091980100100080099b8048001200235744002664646460044660040040024600446600400400244a666aae7c00452f5c0264a666ae68c0100044cd5d000098019aba200213003357440046ae840048cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5015333573466ebcd5d08008018a5113002357440020026eb0d5d08080039991199ab9a0020014a06644666464600446600400400246004466004004002444a666aae7c0084cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba20012332233323230022330020020012300223300200200122253335573e0042664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b8948000dd69aab9e00100113253335573e0042a6644666ae6800800452819b89001480004cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba20012337126eb4d55cf000a40006ae8800c4c8c8c94ccd5cd19b8f00200115332233357340040022940cdc48020018998039aba20063574400a2a666ae68cdc80010008a9991199ab9a00200114a066e2401120001330073574400c00a2a6644666ae6800800452819b894800000c4cc01c018d5d10029bae35573a6ae84010dd71aab9d357420086eb4d55cf1aba1002375a6aae78d5d0801001000a5eb7bdb180dd59aab9e00100113253335573e0042a6644666ae6800800452819911999191801119801001000918011198010010009112999aab9f002133232323002233002002001230022330020020012253335573e002294454cc88ccd5cd0010008a50300335742002260046ae880048cdc4a40006eb4d55cf0008008992999aab9f00215332233357340040022940cdc4800a40002664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b89375a6aae780052000357440062646464a666ae68cdc78010008a9991199ab9a00200114a066e2401000c4cc01cd5d10031aba200515333573466e4000800454cc88ccd5cd0010008a503371200890000998039aba200600515332233357340040022940cdc4a400000626600e00c6ae88014dd71aab9d357420086eb8d55ce9aba1004375a6aae78d5d08011bad35573c6ae840080080040052f5bded8c02664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919911999191801119801001000918011198010010009112999aab9f002133232323002233002002001230022330020020012253335573e002294454cc88ccd5cd0010008a50300335742002260046ae880048cdc4a40006eb4d55cf0008008992999aab9f00215332233357340040022940cdc4800a40002664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b89375a6aae780052000357440062646464a666ae68cdc78010008a9991199ab9a00200114a066e2401000c4cc01cd5d10031aba200515333573466e4000800454cc88ccd5cd0010008a503371200890000998039aba200600515332233357340040022940cdc4a400000626600e00c6ae88014dd71aab9d357420086eb8d55ce9aba1004375a6aae78d5d08011bad35573c6ae84008008004dd59aab9e0014bd6f7b6301aba200313232325333573466e3c00800454cc88ccd5cd0010008a50332233323230022330020020012300223300200200122253335573e0042664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b8948000dd69aab9e00100113253335573e0042a6644666ae6800800452819b89001480004cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba20012337126eb4d55cf000a40006ae8800c4c8c8c94ccd5cd19b8f00200115332233357340040022940cdc48020018998039aba20063574400a2a666ae68cdc80010008a9991199ab9a00200114a066e2401120001330073574400c00a2a6644666ae6800800452819b894800000c4cc01c018d5d10029bae35573a6ae84010dd71aab9d357420086eb4d55cf1aba1002375a6aae78d5d08010010008020018998039aba20063574400a2a666ae68cdc80010008a9991199ab9a00200114a06644666464600446600400400246004466004004002444a666aae7c0084cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba200123371290001bad35573c002002264a666aae7c00854cc88ccd5cd0010008a5033712002900009991919180111980100100091801119801001000912999aab9f00114a22a6644666ae6800800452818019aba10011300235744002466e24dd69aab9e00148000d5d100189919192999ab9a3371e0040022a6644666ae6800800452819b890040031330073574400c6ae8801454ccd5cd19b9000200115332233357340040022940cdc48022400026600e6ae8801801454cc88ccd5cd0010008a503371290000018998038031aba2005375c6aae74d5d08021bae35573a6ae84010dd69aab9e357420046eb4d55cf1aba10020020010044bd6f7b6300998039aba200600515332233357340040022940cc88ccc8c8c0088cc0080080048c0088cc0080080048894ccd55cf80109991919180111980100100091801119801001000912999aab9f00114a22a6644666ae6800800452818019aba10011300235744002466e252000375a6aae780040044c94ccd55cf8010a9991199ab9a00200114a066e240052000133232323002233002002001230022330020020012253335573e002294454cc88ccd5cd0010008a50300335742002260046ae880048cdc49bad35573c00290001aba200313232325333573466e3c00800454cc88ccd5cd0010008a503371200800626600e6ae88018d5d10028a999ab9a337200040022a6644666ae6800800452819b89004480004cc01cd5d10030028a9991199ab9a00200114a066e2520000031330070063574400a6eb8d55ce9aba1004375c6aae74d5d08021bad35573c6ae84008dd69aab9e3574200400400297adef6c600031330070063574400a6eb8d55ce9aba1004375c6aae74d5d08021bab35573c6ae84008dd59aab9e357420040040026eacd5d09aba200e37566ae84028cc88ccd5cd001000a503370e00466e00c94ccd55cf8008a400026646646444a666aae7c00440084cc00ccdc0001240046ae880048cc0080080048c8894ccd55cf800880109980199b8000248008d5d100091980100100080099b80480012002357440026eb0d5d0807a40046644666ae680080052819912999aab9f002153335573e00229445280a999aab9f00114a02a666ae68cdd79aba10023574200226646646444a666aae7c00854ccd55cf8008a5114a02a666aae7c0045280a999ab9a3375e6ae84008d5d08008998019aba20023574400229408cc0080080048c8894ccd55cf8010a999aab9f00114a2294054ccd55cf8008a5015333573466ebcd5d08011aba1001133003357440046ae880045281198010010008009aba2002357440022940d5d10041bac3574201e6644666ae680080052819199ab9a0014a0944cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5015333573466ebcd5d08008018a5113002357440026ae84020d5d10041991199ab9a0020014a066ebc004d5d08041991199ab9a0020014a066e20dd69aba13574401200466e2000920103574200464a666aae7c004520001332332322253335573e002200426600666e0000920023574400246600400400246444a666aae7c00440084cc00ccdc0001240046ae880048cc008008004004cdc02400090011aba200100615333573466e1d2002002132325332233357340040022940cdc49bad357426ae8803cc94ccd55cf8008a400026646646444a666aae7c00440084cc00ccdc0001240046ae880048cc0080080048c8894ccd55cf800880109980199b8000248008d5d100091980100100080099b8048001200235744002664646460044660040040024600446600400400244a666aae7c00452f5c0264a666ae68c0100044cd5d000098019aba200213003357440046ae840048cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5015333573466ebcd5d08008018a5113002357440020026eb0d5d08080038a9991199ab9a00200114a06644666464600446600400400246004466004004002444a666aae7c0084cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba20012332233323230022330020020012300223300200200122253335573e0042664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b8948000dd69aab9e00100113253335573e0042a6644666ae6800800452819b89001480004cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba20012337126eb4d55cf000a40006ae8800c4c8c8c94ccd5cd19b8f00200115332233357340040022940cdc48020018998039aba20063574400a2a666ae68cdc80010008a9991199ab9a00200114a066e2401120001330073574400c00a2a6644666ae6800800452819b894800000c4cc01c018d5d10029bae35573a6ae84010dd71aab9d357420086eb4d55cf1aba1002375a6aae78d5d0801001000a5eb7bdb180dd59aab9e00100113253335573e0042a6644666ae6800800452819911999191801119801001000918011198010010009112999aab9f002133232323002233002002001230022330020020012253335573e002294454cc88ccd5cd0010008a50300335742002260046ae880048cdc4a40006eb4d55cf0008008992999aab9f00215332233357340040022940cdc4800a40002664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b89375a6aae780052000357440062646464a666ae68cdc78010008a9991199ab9a00200114a066e2401000c4cc01cd5d10031aba200515333573466e4000800454cc88ccd5cd0010008a503371200890000998039aba200600515332233357340040022940cdc4a400000626600e00c6ae88014dd71aab9d357420086eb8d55ce9aba1004375a6aae78d5d08011bad35573c6ae840080080040052f5bded8c02664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919911999191801119801001000918011198010010009112999aab9f002133232323002233002002001230022330020020012253335573e002294454cc88ccd5cd0010008a50300335742002260046ae880048cdc4a40006eb4d55cf0008008992999aab9f00215332233357340040022940cdc4800a40002664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b89375a6aae780052000357440062646464a666ae68cdc78010008a9991199ab9a00200114a066e2401000c4cc01cd5d10031aba200515333573466e4000800454cc88ccd5cd0010008a503371200890000998039aba200600515332233357340040022940cdc4a400000626600e00c6ae88014dd71aab9d357420086eb8d55ce9aba1004375a6aae78d5d08011bad35573c6ae84008008004dd59aab9e0014bd6f7b6301aba200313232325333573466e3c00800454cc88ccd5cd0010008a50332233323230022330020020012300223300200200122253335573e0042664646460044660040040024600446600400400244a666aae7c0045288a9991199ab9a00200114a060066ae840044c008d5d1000919b8948000dd69aab9e00100113253335573e0042a6644666ae6800800452819b89001480004cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba20012337126eb4d55cf000a40006ae8800c4c8c8c94ccd5cd19b8f00200115332233357340040022940cdc48020018998039aba20063574400a2a666ae68cdc80010008a9991199ab9a00200114a066e2401120001330073574400c00a2a6644666ae6800800452819b894800000c4cc01c018d5d10029bae35573a6ae84010dd71aab9d357420086eb4d55cf1aba1002375a6aae78d5d08010010008020018998039aba20063574400a2a666ae68cdc80010008a9991199ab9a00200114a06644666464600446600400400246004466004004002444a666aae7c0084cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5115332233357340040022940c00cd5d0800898011aba200123371290001bad35573c002002264a666aae7c00854cc88ccd5cd0010008a5033712002900009991919180111980100100091801119801001000912999aab9f00114a22a6644666ae6800800452818019aba10011300235744002466e24dd69aab9e00148000d5d100189919192999ab9a3371e0040022a6644666ae6800800452819b890040031330073574400c6ae8801454ccd5cd19b9000200115332233357340040022940cdc48022400026600e6ae8801801454cc88ccd5cd0010008a503371290000018998038031aba2005375c6aae74d5d08021bae35573a6ae84010dd69aab9e357420046eb4d55cf1aba10020020010044bd6f7b6300998039aba200600515332233357340040022940cc88ccc8c8c0088cc0080080048c0088cc0080080048894ccd55cf80109991919180111980100100091801119801001000912999aab9f00114a22a6644666ae6800800452818019aba10011300235744002466e252000375a6aae780040044c94ccd55cf8010a9991199ab9a00200114a066e240052000133232323002233002002001230022330020020012253335573e002294454cc88ccd5cd0010008a50300335742002260046ae880048cdc49bad35573c00290001aba200313232325333573466e3c00800454cc88ccd5cd0010008a503371200800626600e6ae88018d5d10028a999ab9a337200040022a6644666ae6800800452819b89004480004cc01cd5d10030028a9991199ab9a00200114a066e2520000031330070063574400a6eb8d55ce9aba1004375c6aae74d5d08021bad35573c6ae84008dd69aab9e3574200400400297adef6c600031330070063574400a6eb8d55ce9aba1004375c6aae74d5d08021bab35573c6ae84008dd59aab9e357420040040026eacd5d09aba200e37566ae8402854cc88ccd5cd0010008a503370e00466e04c94ccd55cf8008a400026646646444a666aae7c00440084cc00ccdc0001240046ae880048cc0080080048c8894ccd55cf800880109980199b8000248008d5d100091980100100080099b80480012002357440026eb0d5d0807a40042a6644666ae680080045281991919180111980100100091801119801001000912999aab9f00114a22a6644666ae6800800452818019aba100113002357440024a66466ae680045289991919180111980100100091801119801001000912999aab9f00114a02a666ae68cdd79aba100100314a2260046ae880040040244cdd78010009bac3574201e2a6644666ae680080045281991919180111980100100091801119801001000912999aab9f00114a02a666ae68cdd79aba100100314a2260046ae88004004dd61aba100f15332233357340040022940c8ccd5cd000a504a2664646460044660040040024600446600400400244a666aae7c0045280a999ab9a3375e6ae8400400c528898011aba20010010081337106eb4d5d09aba20090023574200464a666aae7c004520001332332322253335573e002200426600666e0000920023574400246600400400246444a666aae7c00440084cc00ccdc0001240046ae880048cc008008004004cdc02400090011aba200100615332233357340040022940cdc49bad357426ae88034c94ccd55cf8008a400026646646444a666aae7c00440084cc00ccdc0001240046ae880048cc0080080048c8894ccd55cf800880109980199b8000248008d5d100091980100100080099b8048001200235744002664646460044660040040024600446600400400244a666aae7c00452f5c0264a666ae68c0100044cd5d000098019aba200213003357440046ae840048cc8c8c8c0088cc0080080048c0088cc008008004894ccd55cf8008a5015333573466ebcd5d08008018a5113002357440020026eb0d5d08070028a9991199ab9a00200114a066ebcd5d09aba200d357426ae8801c4cc894ccd55cf8010a999aab9f00114a2294054ccd55cf8008a5015333573466ebcd5d08011aba10011332332322253335573e0042a666aae7c0045288a50153335573e002294054ccd5cd19baf357420046ae840044cc00cd5d10011aba200114a046600400400246444a666aae7c00854ccd55cf8008a5114a02a666aae7c0045280a999ab9a3375e6ae84008d5d08008998019aba20023574400229408cc008008004004d5d10011aba200114a06eb0d5d08068031aab9e00235573a0026ea804852616375c6ae84014dd61aba132357446ae88d5d11aba2357440026ae88024dd61aba10013235573c6ea8004c8c8c8c8c80154ccd5cd19b87480000084c8c8c8c8c8c8c92653335573e0022930a99ab9c4901317074727946726f6d2850446174615265636f72645b5d293a206c697374206973206c6f6e676572207468616e207a65726f0016357440066eb4004d5d08009aba200333232323002233002002001230022330020020012253335573e002297ae0133574060066ae84004c008d5d10009192999ab9a3370e6e3400520381002153357389212c7074727946726f6d28505075624b657948617368293a206d757374206265203238206279746573206c6f6e670016375c0026eb0004d5d08008a99ab9c4913f7265616368656420656e64206f662073756d207768696c65207374696c6c206e6f7420686176696e6720666f756e642074686520636f6e7374727563746f72001635573c0046aae74004dd5000991919192999ab9a3370e900200109aba100115335738921136e6f7420616e20696e6c696e6520646174756d001635573c0046aae74004dd50009aba1357440026ae88c8d55cf1baa0013253335573e0022c264a666aae7c0044d5d08010b1aba200133232323002233002002001230022330020020012253335573e002297ae0132533357346008002266ae80004c00cd5d1001098019aba200235742002644646464a666ae68cdc3a400000429404cdc79bae3574200200a6aae78008d55ce8009baa3235742646aae78dd50008009aba13235573c6ea8004004dd71aba100137586ae84018d55cf0011aab9d0013754646ae84c8d55cf1baa00100135742002646aae78dd5000999119919180111980100100091801119801001000912999aab9f00116132533357346466ebcdd3991aab9e375400200a6e9cc8d55cf1baa0010013574200226ae84d5d1000898019aba20023235573c6ea8004d5d08008011bac357420066ae84010c8d55cf1baa001009357446ae88004c8d55cf1baa001357420082a66ae71241425061747465726e206d61746368206661696c75726520696e2027646f2720626c6f636b206174207372632f44414f56616c696461746f722e68733a39373a352d3432001635573c0046aae74004dd51aba135744002646aae78dd50008009bae00c00b00a0095333573466e1d2000002132325333573466e1cdc6800a407026464932999aab9f001149854cd5ce2481317074727946726f6d2850446174615265636f72645b5d293a206c697374206973206c6f6e676572207468616e207a65726f0016357440062a66ae7124012c7074727946726f6d28505075624b657948617368293a206d757374206265203238206279746573206c6f6e670016375c0026ae8400454ccd5cd19b87480080084c8c94ccd5cd19b87371a002901c0991924ca666aae7c00452615335738921317074727946726f6d2850446174615265636f72645b5d293a206c697374206973206c6f6e676572207468616e207a65726f0016357440062a66ae7124012c7074727946726f6d28505075624b657948617368293a206d757374206265203238206279746573206c6f6e670016375c0026ae8400454ccd5cd19b87480100084c92653335573e0022930a99ab9c4901317074727946726f6d2850446174615265636f72645b5d293a206c697374206973206c6f6e676572207468616e207a65726f00161533573892013f7265616368656420656e64206f662073756d207768696c65207374696c6c206e6f7420686176696e6720666f756e642074686520636f6e7374727563746f72001635573c0046aae74004dd50032999ab9a3370e900000109919191919191924ca666aae7c00452615335738921317074727946726f6d2850446174615265636f72645b5d293a206c697374206973206c6f6e676572207468616e207a65726f0016357440066eb4004d5d08009aba200333232323002233002002001230022330020020012253335573e002297ae0133574060066ae84004c008d5d10009192999ab9a3370e6e3400520381002153357389212c7074727946726f6d28505075624b657948617368293a206d757374206265203238206279746573206c6f6e670016375c0026eb0004d5d08008a99ab9c4913f7265616368656420656e64206f662073756d207768696c65207374696c6c206e6f7420686176696e6720666f756e642074686520636f6e7374727563746f72001635573c0046aae74004dd500181"
          
          // const emurgoTreasury : SpendingValidator = {
          //   type:"PlutusV2", 
          //   script: applyParamsToScript(emurgoTreasuryCbor, [txOutRefParam])
          // }
    
          const emurgoMinting : MintingPolicy = {type:"PlutusV2", script: applyParamsToScript(emurgoMintingCbor, [txOutRefParam])}
          const emurgoMintingCS = lucid.utils.mintingPolicyToId(emurgoMinting)
    
          const emurgoMetadataControl : SpendingValidator = 
            {type:"PlutusV2", script: applyParamsToScript(emurgoMetadataControlCbor, [emurgoMintingCS])}
          const metadataControlAddress = lucid.utils.validatorToAddress(emurgoMetadataControl)
    
        //   const metadata : NFTMetadata = {
        //     name: "Emurgo Cosmetic Name",
        //     image: "ipfs://QmSAkzP1DTvGe6n2EQB45LWN7wkT2hKDbFc8oga1LcHsvx"
        //   }
    
        const metadata : NFTMetadata = {
            name: tokenNameInput,
            image: "ipfs://QmSAkzP1DTvGe6n2EQB45LWN7wkT2hKDbFc8oga1LcHsvx"
          }

          const tokenName = fromText("EmurgoTN")
          const metadataDatum = Data.to<DatumMetadata>({
              metadata: Data.castFrom<Metadata222>(Data.fromJson(metadata), Metadata222),
              version: BigInt(1),
              extra: Data.from(Data.void())
            }, DatumMetadata)
    
          const txHash = await lucid.newTx()
            .collectFrom([utxos[0]])
            .mintAssets({
              [toUnit(emurgoMintingCS, tokenName, 100)]: BigInt(1),
              [toUnit(emurgoMintingCS, tokenName, 222)]: BigInt(1)
            }, Data.to(BigInt(0)))
            .payToContract(metadataControlAddress, metadataDatum, {[toUnit(emurgoMintingCS, tokenName, 100)]: BigInt(1)})
            .payToContract("addr_test1wpu365zw7petuyvhng78y2l3534g4ammuuexldu5nkjf0sgz5xu88", Data.void(), {lovelace: BigInt(75_000_000)})
            .attachMintingPolicy(emurgoMinting)
            .complete()
            .then((tx) => tx.sign().complete())
            .then((tx) => tx.submit())
          console.log(txHash)
        };
    };

    return (
        <Layout className="bg-white">
            <div>Address: {walletStore.address}</div>
            <div className='m-10'>
            <p> 
                Emurgo example
            </p>
            </div>
            <div className="card w-96 bg-base-100 shadow-lg">
                <div className="px-10 pt-10">
                    <input className="input input-bordered w-full max-w-xs" type="text" placeholder="Type Cosmetic NFT Name" value={tokenNameInput} onChange={e => setTokenNameInput(e.target.value)}/>
                </div>
                <div className="card-body items-center text-center">
                    <p>Mint any CIP68 tokens</p>
                    <div className="card-actions">
                    <button className="btn btn-primary m-5" onClick={() => { mintOnchainMetadata() }}> Mint CIP68</button>
                </div>
            </div>
            </div>
            {/* <div className="mx-60 my-10">
            <button className="btn btn-secondary m-5" onClick={() => { mintOnchainMetadata() }}> Mint CIP68</button>
            </div> */}
        </Layout>
    );  
};



export default MintCip68;